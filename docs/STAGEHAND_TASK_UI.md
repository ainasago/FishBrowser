# Stagehand AI ä»»åŠ¡ç•Œé¢æ–‡æ¡£

## ğŸ“‹ æ¦‚è¿°

Stagehand AI ä»»åŠ¡ç•Œé¢æ˜¯ä¸€ä¸ªæ™ºèƒ½çš„æµè§ˆå™¨è‡ªåŠ¨åŒ–ä»»åŠ¡ç”Ÿæˆå·¥å…·ï¼Œé€šè¿‡ AI å°†è‡ªç„¶è¯­è¨€æè¿°è½¬æ¢ä¸ºå¯æ‰§è¡Œçš„ Stagehand JavaScript è„šæœ¬ã€‚

## ğŸ¨ ç•Œé¢è®¾è®¡

### å¸ƒå±€ç»“æ„

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  é¡¶éƒ¨å·¥å…·æ                                               â”‚
â”‚  ğŸ­ Stagehand AI ä»»åŠ¡ | AI æä¾›å•† | Stagehand çŠ¶æ€      â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                              â”‚                          â”‚
â”‚  å¯¹è¯å†å²åŒº                   â”‚  è„šæœ¬é¢„è§ˆåŒº              â”‚
â”‚  - æ¬¢è¿æ¶ˆæ¯                   â”‚  - JavaScript ä»£ç        â”‚
â”‚  - å¿«æ·ç¤ºä¾‹                   â”‚  - è„šæœ¬ä¿¡æ¯              â”‚
â”‚  - ç”¨æˆ·æ¶ˆæ¯                   â”‚  - æ“ä½œæŒ‰é’®              â”‚
â”‚  - AI å›å¤                    â”‚                          â”‚
â”‚                              â”‚                          â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  è¾“å…¥åŒº                                                  â”‚
â”‚  [æè¿°ä»»åŠ¡éœ€æ±‚...] [ç”Ÿæˆè„šæœ¬ âœ¨]                         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### ä¸»è¦åŒºåŸŸ

#### 1. é¡¶éƒ¨å·¥å…·æ 
- **æ ‡é¢˜**ï¼šğŸ­ Stagehand AI ä»»åŠ¡
- **çŠ¶æ€æŒ‡ç¤ºå™¨**ï¼šæ˜¾ç¤ºå½“å‰çŠ¶æ€ï¼ˆå°±ç»ª/ç”Ÿæˆä¸­/æ‰§è¡Œä¸­ï¼‰
- **AI æä¾›å•†é€‰æ‹©**ï¼šä¸‹æ‹‰é€‰æ‹© AI æœåŠ¡
- **Stagehand çŠ¶æ€**ï¼šæ˜¾ç¤º Stagehand æ˜¯å¦å·²å®‰è£…å’Œå°±ç»ª
- **å·¥å…·æŒ‰é’®**ï¼š
  - ğŸ“š ç¤ºä¾‹åº“
  - ğŸ“‹ å†å²ä»»åŠ¡
  - ğŸ—‘ï¸ æ¸…ç©ºå¯¹è¯
  - âš™ï¸ è®¾ç½®

#### 2. å¯¹è¯å†å²åŒºï¼ˆå·¦ä¾§ï¼‰
- **æ¬¢è¿æ¶ˆæ¯**ï¼šä»‹ç»åŠŸèƒ½å’Œä½¿ç”¨æ–¹æ³•
- **å¿«æ·ç¤ºä¾‹**ï¼š6 ä¸ªé¢„è®¾ä»»åŠ¡æ¨¡æ¿
  - ğŸ” æ™ºèƒ½ç™»å½•
  - ğŸ” æœç´¢æå–
  - ğŸ§­ æ™ºèƒ½å¯¼èˆª
  - ğŸ“Š æ•°æ®æå–
  - ğŸ“ è¡¨å•å¡«å†™
  - ğŸ›’ è´­ç‰©æµç¨‹
- **æ¶ˆæ¯æ°”æ³¡**ï¼š
  - ç”¨æˆ·æ¶ˆæ¯ï¼ˆç»¿è‰²ï¼Œå³å¯¹é½ï¼‰
  - AI æ¶ˆæ¯ï¼ˆç°è‰²ï¼Œå·¦å¯¹é½ï¼‰
  - ç³»ç»Ÿæ¶ˆæ¯ï¼ˆæµ…ç»¿è‰²ï¼Œå…¨å®½ï¼‰

#### 3. è„šæœ¬é¢„è§ˆåŒºï¼ˆå³ä¾§ï¼‰
- **ä»£ç ç¼–è¾‘å™¨**ï¼š
  - æ·±è‰²ä¸»é¢˜ï¼ˆ#1E1E1E èƒŒæ™¯ï¼‰
  - Consolas å­—ä½“
  - å¯ç¼–è¾‘
  - è¯­æ³•é«˜äº®ï¼ˆæµ…è‰²æ–‡æœ¬ï¼‰
- **è„šæœ¬ä¿¡æ¯é¢æ¿**ï¼š
  - æ“ä½œæ•°ï¼šç»Ÿè®¡ act/extract/observe è°ƒç”¨
  - é¢„è®¡æ—¶é—´ï¼šä¼°ç®—æ‰§è¡Œæ—¶é•¿
  - å¤æ‚åº¦ï¼šç®€å•/ä¸­ç­‰/å¤æ‚
- **æ“ä½œæŒ‰é’®**ï¼š
  - â–¶ï¸ è¿è¡Œè„šæœ¬ï¼ˆç»¿è‰²ä¸»æŒ‰é’®ï¼‰
  - ğŸ” è°ƒè¯•æ¨¡å¼
  - âœ… ä¿å­˜ä»»åŠ¡ï¼ˆè“è‰²ï¼‰
  - ğŸ“‹ å¤åˆ¶è„šæœ¬
  - ğŸ’¾ å¯¼å‡ºä¸º .js
  - ğŸ”§ ä¼˜åŒ–è„šæœ¬

#### 4. è¾“å…¥åŒºï¼ˆåº•éƒ¨ï¼‰
- **è¾“å…¥æ¡†**ï¼šåœ†è§’è®¾è®¡ï¼Œæ”¯æŒå¤šè¡Œè¾“å…¥
- **å ä½ç¬¦æç¤º**ï¼šå¼•å¯¼ç”¨æˆ·è¾“å…¥
- **å‘é€æŒ‰é’®**ï¼šç»¿è‰²åœ†è§’æŒ‰é’®"ç”Ÿæˆè„šæœ¬ âœ¨"

## ğŸ¯ æ ¸å¿ƒåŠŸèƒ½

### 1. AI è„šæœ¬ç”Ÿæˆ

#### ç³»ç»Ÿæç¤ºè¯
```
ä½ æ˜¯ä¸€ä¸ª Stagehand è„šæœ¬ç”Ÿæˆä¸“å®¶ã€‚Stagehand æ˜¯ä¸€ä¸ª AI é©±åŠ¨çš„æµè§ˆå™¨è‡ªåŠ¨åŒ–æ¡†æ¶ã€‚

æ ¸å¿ƒ APIï¼š
- act(instruction) - æ‰§è¡Œæ“ä½œ
- extract(instruction, schema) - æå–æ•°æ®
- observe(instruction) - è§‚å¯Ÿå…ƒç´ 
- page - Playwright Page å¯¹è±¡
```

#### ç”Ÿæˆæµç¨‹
```
ç”¨æˆ·è¾“å…¥ â†’ æ„å»ºæç¤ºè¯ â†’ è°ƒç”¨ AI API â†’ è§£æå“åº” â†’ æ˜¾ç¤ºè„šæœ¬
```

#### è„šæœ¬æ¨¡æ¿
```javascript
const { Stagehand } = require('@browserbasehq/stagehand');

(async () => {
    const stagehand = new Stagehand({
        env: 'LOCAL',
        verbose: 1,
        debugDom: true
    });
    
    try {
        await stagehand.init();
        await stagehand.page.goto('https://example.com');
        
        // AI ç”Ÿæˆçš„æ“ä½œæ­¥éª¤
        await stagehand.act('æ“ä½œæŒ‡ä»¤');
        
        const data = await stagehand.extract('æå–æŒ‡ä»¤', {
            // æ•°æ®ç»“æ„
        });
        
        console.log('ä»»åŠ¡å®Œæˆï¼', data);
    } catch (error) {
        console.error('ä»»åŠ¡å¤±è´¥:', error);
    } finally {
        await stagehand.close();
    }
})();
```

### 2. å¿«æ·ç¤ºä¾‹

#### ç™»å½•æµç¨‹
```
åˆ›å»ºä¸€ä¸ªç™»å½• GitHub çš„è„šæœ¬ï¼š
æ‰“å¼€ github.comï¼Œç‚¹å‡» Sign inï¼Œå¡«å†™ç”¨æˆ·åå’Œå¯†ç ï¼Œç‚¹å‡»ç™»å½•æŒ‰é’®
```

#### æœç´¢æå–
```
åˆ›å»ºä¸€ä¸ªæœç´¢è„šæœ¬ï¼š
æ‰“å¼€ Googleï¼Œæœç´¢ 'Stagehand AI'ï¼Œæå–å‰ 5 ä¸ªæœç´¢ç»“æœçš„æ ‡é¢˜å’Œé“¾æ¥
```

#### æ•°æ®æå–
```
åˆ›å»ºä¸€ä¸ªæ•°æ®æå–è„šæœ¬ï¼š
æ‰“å¼€ Hacker News é¦–é¡µï¼Œæå–å‰ 10 æ¡æ–°é—»çš„æ ‡é¢˜ã€åˆ†æ•°å’Œè¯„è®ºæ•°
```

### 3. è„šæœ¬åˆ†æ

#### æ“ä½œè®¡æ•°
```csharp
int count = 0;
count += Regex.Matches(script, @"\.act\(").Count;
count += Regex.Matches(script, @"\.extract\(").Count;
count += Regex.Matches(script, @"\.observe\(").Count;
```

#### æ—¶é—´ä¼°ç®—
```
æ¯ä¸ªæ“ä½œçº¦ 3-5 ç§’
æ€»æ—¶é—´ = æ“ä½œæ•° Ã— 4 ç§’
```

#### å¤æ‚åº¦è¯„ä¼°
```
ç®€å•ï¼šâ‰¤ 3 ä¸ªæ“ä½œ â­
ä¸­ç­‰ï¼š4-8 ä¸ªæ“ä½œ â­â­
å¤æ‚ï¼š> 8 ä¸ªæ“ä½œ â­â­â­
```

### 4. è„šæœ¬æ“ä½œ

#### è¿è¡Œè„šæœ¬
```csharp
// TODO: è°ƒç”¨ Node.js æ‰§è¡Œè„šæœ¬
// 1. ä¿å­˜è„šæœ¬åˆ°ä¸´æ—¶æ–‡ä»¶
// 2. æ‰§è¡Œ: node temp-script.js
// 3. æ•è·è¾“å‡ºå’Œé”™è¯¯
// 4. æ˜¾ç¤ºæ‰§è¡Œç»“æœ
```

#### è°ƒè¯•æ¨¡å¼
```
å¯ç”¨è¯¦ç»†æ—¥å¿—ï¼šverbose: 2
å¯ç”¨ DOM è°ƒè¯•ï¼šdebugDom: true
æ˜¾ç¤ºæ‰§è¡Œè¿‡ç¨‹
```

#### å¯¼å‡ºè„šæœ¬
```csharp
SaveFileDialog dialog = new SaveFileDialog
{
    Filter = "JavaScript files (*.js)|*.js",
    DefaultExt = ".js",
    FileName = "stagehand-task.js"
};
```

#### ä¼˜åŒ–è„šæœ¬
```
å‘é€ä¼˜åŒ–è¯·æ±‚ç»™ AIï¼š
"è¯·ä¼˜åŒ–ä»¥ä¸‹ Stagehand è„šæœ¬ï¼Œä½¿å…¶æ›´é«˜æ•ˆã€æ›´å¥å£®"
```

## ğŸ”§ æŠ€æœ¯å®ç°

### ä¾èµ–æœåŠ¡

```csharp
private readonly AIProviderService _aiProviderService;  // AI è°ƒç”¨
private readonly LogService _logService;                 // æ—¥å¿—è®°å½•
```

### æ ¸å¿ƒæ–¹æ³•

#### ç”Ÿæˆè„šæœ¬
```csharp
private async Task<string> GenerateStagehandScriptAsync(
    string systemPrompt, 
    string userMessage)
{
    var messages = new List<ChatMessage>
    {
        new ChatMessage { Role = "system", Content = systemPrompt },
        new ChatMessage { Role = "user", Content = userMessage }
    };

    var response = await _aiProviderService.ChatCompletionAsync(
        providerId,
        messages,
        temperature: 0.7,
        maxTokens: 2000
    );

    return response?.Trim() ?? "";
}
```

#### æ›´æ–°è„šæœ¬ä¿¡æ¯
```csharp
private void UpdateScriptInfo(string script)
{
    var actionCount = CountActions(script);
    ActionCountText.Text = actionCount.ToString();
    
    var estimatedSeconds = actionCount * 4;
    EstimatedTimeText.Text = FormatTime(estimatedSeconds);
    
    ComplexityText.Text = GetComplexity(actionCount);
}
```

## ğŸ¨ æ ·å¼è®¾è®¡

### é¢œè‰²æ–¹æ¡ˆ

```
ä¸»è‰²è°ƒï¼š#10A37Fï¼ˆStagehand ç»¿ï¼‰
è¾…åŠ©è‰²ï¼š#0078D4ï¼ˆè“è‰²ï¼‰
èƒŒæ™¯è‰²ï¼š#F8F9FAï¼ˆæµ…ç°ï¼‰
æ–‡æœ¬è‰²ï¼š#333333ï¼ˆæ·±ç°ï¼‰
ä»£ç èƒŒæ™¯ï¼š#1E1E1Eï¼ˆæ·±è‰²ï¼‰
ä»£ç æ–‡æœ¬ï¼š#D4D4D4ï¼ˆæµ…è‰²ï¼‰
```

### æ¶ˆæ¯æ°”æ³¡

```xml
<!-- ç”¨æˆ·æ¶ˆæ¯ -->
<Style x:Key="UserMessageStyle">
    <Setter Property="Background" Value="#10A37F"/>
    <Setter Property="CornerRadius" Value="12"/>
    <Setter Property="Margin" Value="80,8,16,8"/>
    <Setter Property="HorizontalAlignment" Value="Right"/>
</Style>

<!-- AI æ¶ˆæ¯ -->
<Style x:Key="AIMessageStyle">
    <Setter Property="Background" Value="#F3F4F6"/>
    <Setter Property="CornerRadius" Value="12"/>
    <Setter Property="Margin" Value="16,8,80,8"/>
    <Setter Property="HorizontalAlignment" Value="Left"/>
</Style>
```

### æŒ‰é’®æ ·å¼

```xml
<!-- ä¸»æŒ‰é’® -->
Background="#10A37F"
Foreground="White"
CornerRadius="24"
Hover: #0D8B6D

<!-- æ¬¡è¦æŒ‰é’® -->
Background="White"
BorderBrush="#E0E0E0"
Hover: BorderBrush="#10A37F"
```

## ğŸ“ ä½¿ç”¨æµç¨‹

### åŸºæœ¬æµç¨‹

```
1. é€‰æ‹© AI æä¾›å•†
2. è¾“å…¥ä»»åŠ¡æè¿°æˆ–é€‰æ‹©å¿«æ·ç¤ºä¾‹
3. ç‚¹å‡»"ç”Ÿæˆè„šæœ¬ âœ¨"
4. AI ç”Ÿæˆ Stagehand è„šæœ¬
5. åœ¨å³ä¾§é¢„è§ˆå’Œç¼–è¾‘è„šæœ¬
6. ç‚¹å‡»"è¿è¡Œè„šæœ¬"æ‰§è¡Œ
7. æŸ¥çœ‹æ‰§è¡Œç»“æœ
8. ä¿å­˜æˆ–å¯¼å‡ºè„šæœ¬
```

### ç¤ºä¾‹å¯¹è¯

```
ç”¨æˆ·ï¼šæ‰“å¼€ GitHubï¼Œæœç´¢ stagehandï¼Œç‚¹å‡»ç¬¬ä¸€ä¸ªç»“æœ

AIï¼šâœ… å·²ç”Ÿæˆ Stagehand è„šæœ¬ï¼

è„šæœ¬åŒ…å« 3 ä¸ªæ“ä½œæ­¥éª¤ã€‚ä½ å¯ä»¥åœ¨å³ä¾§é¢„è§ˆå’Œç¼–è¾‘è„šæœ¬ï¼Œç„¶åç‚¹å‡»"è¿è¡Œè„šæœ¬"æ‰§è¡Œã€‚

[å³ä¾§æ˜¾ç¤ºç”Ÿæˆçš„è„šæœ¬]
```

## ğŸš€ åç»­å¼€å‘

### å¾…å®ç°åŠŸèƒ½

1. **è„šæœ¬æ‰§è¡Œ**
   - é›†æˆ Node.js æ‰§è¡Œç¯å¢ƒ
   - å®æ—¶è¾“å‡ºæ˜¾ç¤º
   - é”™è¯¯æ•è·å’Œå¤„ç†

2. **è°ƒè¯•æ¨¡å¼**
   - æ­¥è¿›æ‰§è¡Œ
   - æ–­ç‚¹è®¾ç½®
   - å˜é‡æŸ¥çœ‹

3. **ä»»åŠ¡ç®¡ç†**
   - ä¿å­˜ä»»åŠ¡åˆ°æ•°æ®åº“
   - å†å²ä»»åŠ¡åˆ—è¡¨
   - ä»»åŠ¡åˆ†ç±»å’Œæ ‡ç­¾

4. **ç¤ºä¾‹åº“**
   - é¢„è®¾è„šæœ¬æ¨¡æ¿
   - ç¤¾åŒºåˆ†äº«
   - æ”¶è—å’Œè¯„åˆ†

5. **é«˜çº§åŠŸèƒ½**
   - è„šæœ¬ç‰ˆæœ¬æ§åˆ¶
   - åä½œç¼–è¾‘
   - å®šæ—¶æ‰§è¡Œ
   - ç»“æœé€šçŸ¥

### é›†æˆç‚¹

```csharp
// éœ€è¦é›†æˆçš„æœåŠ¡
- StagehandMaintenanceService  // Stagehand çŠ¶æ€ç®¡ç†
- NodeExecutionService          // Node.js è„šæœ¬æ‰§è¡Œ
- TaskStorageService            // ä»»åŠ¡å­˜å‚¨
- ScriptValidationService       // è„šæœ¬éªŒè¯
```

## ğŸ“Š æ€§èƒ½ä¼˜åŒ–

### AI è°ƒç”¨ä¼˜åŒ–

```
- ä½¿ç”¨æµå¼å“åº”ï¼ˆStreamingï¼‰
- ç¼“å­˜å¸¸ç”¨è„šæœ¬æ¨¡æ¿
- æ‰¹é‡ç”Ÿæˆå¤šä¸ªå˜ä½“
- æ™ºèƒ½é‡è¯•æœºåˆ¶
```

### UI å“åº”ä¼˜åŒ–

```
- å¼‚æ­¥åŠ è½½å†å²è®°å½•
- è™šæ‹ŸåŒ–é•¿åˆ—è¡¨
- å»¶è¿ŸåŠ è½½ç¤ºä¾‹
- é˜²æŠ–è¾“å…¥å¤„ç†
```

## ğŸ”’ å®‰å…¨è€ƒè™‘

### è„šæœ¬å®‰å…¨

```
- æ²™ç®±æ‰§è¡Œç¯å¢ƒ
- æƒé™æ§åˆ¶
- æ•æ„Ÿä¿¡æ¯è¿‡æ»¤
- æ‰§è¡Œæ—¶é—´é™åˆ¶
```

### æ•°æ®å®‰å…¨

```
- API Key åŠ å¯†å­˜å‚¨
- è„šæœ¬å†…å®¹åŠ å¯†
- è®¿é—®æ—¥å¿—è®°å½•
- ç”¨æˆ·éš”ç¦»
```

---

**ç•Œé¢å·²å®Œæˆï¼** ğŸ‰

ç°åœ¨å¯ä»¥ï¼š
1. å°† `StagehandTaskView.xaml` æ·»åŠ åˆ°é¡¹ç›®
2. åœ¨ä¸»çª—å£æ·»åŠ å¯¼èˆªå…¥å£
3. æµ‹è¯• AI è„šæœ¬ç”ŸæˆåŠŸèƒ½
4. å®ç°è„šæœ¬æ‰§è¡ŒåŠŸèƒ½

ä¸‹ä¸€æ­¥å»ºè®®ï¼š
- å®ç° Node.js è„šæœ¬æ‰§è¡ŒæœåŠ¡
- æ·»åŠ ä»»åŠ¡å­˜å‚¨åŠŸèƒ½
- å®Œå–„é”™è¯¯å¤„ç†å’Œæ—¥å¿—
- ä¼˜åŒ– AI æç¤ºè¯
