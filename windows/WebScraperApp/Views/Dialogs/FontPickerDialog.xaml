<Window x:Class="FishBrowser.WPF.Views.FontPickerDialog"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        Title="选择字体" Height="500" Width="700" WindowStartupLocation="CenterOwner"
        ResizeMode="CanResize">
  <Grid Margin="12">
    <Grid.RowDefinitions>
      <RowDefinition Height="Auto"/>
      <RowDefinition Height="Auto"/>
      <RowDefinition Height="*"/>
      <RowDefinition Height="Auto"/>
    </Grid.RowDefinitions>

    <!-- 搜索与过滤 -->
    <Grid Grid.Row="0" Margin="0,0,0,8">
      <Grid.ColumnDefinitions>
        <ColumnDefinition Width="*"/>
        <ColumnDefinition Width="Auto"/>
        <ColumnDefinition Width="Auto"/>
        <ColumnDefinition Width="Auto"/>
      </Grid.ColumnDefinitions>
      <TextBox x:Name="SearchBox" Grid.Column="0" Height="28" TextChanged="SearchBox_TextChanged">
        <TextBox.Style>
          <Style TargetType="TextBox">
            <Style.Triggers>
              <Trigger Property="Text" Value="">
                <Setter Property="Background">
                  <Setter.Value>
                    <VisualBrush AlignmentX="Left" AlignmentY="Center" Stretch="None">
                      <VisualBrush.Visual>
                        <TextBlock Text="搜索字体名称..." Foreground="Gray" Margin="4,0,0,0"/>
                      </VisualBrush.Visual>
                    </VisualBrush>
                  </Setter.Value>
                </Setter>
              </Trigger>
            </Style.Triggers>
          </Style>
        </TextBox.Style>
      </TextBox>
      <ComboBox x:Name="OsFilterCombo" Grid.Column="1" Width="100" Height="28" Margin="8,0,0,0" SelectionChanged="Filter_Changed">
        <ComboBoxItem Content="全部 OS" Tag=""/>
        <ComboBoxItem Content="Windows" Tag="Windows"/>
        <ComboBoxItem Content="macOS" Tag="macOS"/>
        <ComboBoxItem Content="Linux" Tag="Linux"/>
        <ComboBoxItem Content="Android" Tag="Android"/>
        <ComboBoxItem Content="iOS" Tag="iOS"/>
      </ComboBox>
      <ComboBox x:Name="CategoryFilterCombo" Grid.Column="2" Width="100" Height="28" Margin="8,0,0,0" SelectionChanged="Filter_Changed">
        <ComboBoxItem Content="全部类别" Tag=""/>
        <ComboBoxItem Content="Sans" Tag="Sans"/>
        <ComboBoxItem Content="Serif" Tag="Serif"/>
        <ComboBoxItem Content="Mono" Tag="Mono"/>
        <ComboBoxItem Content="Symbol" Tag="Symbol"/>
        <ComboBoxItem Content="Emoji" Tag="Emoji"/>
      </ComboBox>
      <Button x:Name="ShuffleButton" Grid.Column="3" Content="换一换" Width="80" Height="28" Margin="8,0,0,0" Click="Shuffle_Click"/>
    </Grid>

    <!-- 统计信息 -->
    <TextBlock x:Name="CountText" Grid.Row="1" Foreground="#666" FontSize="11" Margin="0,0,0,6"/>

    <!-- 字体列表 -->
    <ListBox x:Name="FontList" Grid.Row="2" SelectionMode="Multiple" VirtualizingPanel.IsVirtualizing="True" VirtualizingPanel.VirtualizationMode="Recycling">
      <ListBox.ItemTemplate>
        <DataTemplate>
          <CheckBox Content="{Binding Name}" IsChecked="{Binding IsSelected, Mode=TwoWay}" Margin="0,4"/>
        </DataTemplate>
      </ListBox.ItemTemplate>
    </ListBox>

    <!-- 按钮 -->
    <StackPanel Grid.Row="3" Orientation="Horizontal" HorizontalAlignment="Right" Margin="0,12,0,0">
      <Button x:Name="OkButton" Content="确定" Width="88" Height="30" Margin="0,0,8,0" Click="Ok_Click"/>
      <Button Content="取消" Width="88" Height="30" Click="Cancel_Click"/>
    </StackPanel>
  </Grid>
</Window>
